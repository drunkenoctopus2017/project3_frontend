<div class="container-fluid">
	<!-- <h1>Drunken Octopus Scrum Board System</h1> -->
	<div class="jumbotron">
		<div *ngIf="board">
			<h1>{{board.name}}</h1>
			<h4>Members:
				<span *ngFor="let member of members; last as isLast">{{member.firstName}} {{member.lastName}}{{isLast ? '' : ', '}}</span>
			</h4>
			<p>Start Date: {{getStartDateString()}}
				<br /> End Date: {{getEndDateString()}}
				<br /> Duration: {{board.duration}} days</p>
			<button *ngIf="role.id >= 200" (click)="createStory(); modal2.show() " class="btn btn-primary">New Story</button>
			<button (click)="viewChart()" class="btn btn-dark">Burndown Chart</button>
			<button (click)="goBackToMainMenu()" class="btn btn-secondary">Back</button>
		</div>
	</div>
	<app-modal id="modal2" #modal2>
		<!-- <div class="app-modal-header">
					Delete {{b.board.name}}
				</div> -->
		<div class="app-modal-body">
			<!-- <p>Are you sure you want to delete this board? All data on this board will be lost.</p> -->
			<app-create-update-story *ngIf="this.storyService.getSelectedStory()"></app-create-update-story>
			<div align="right">
				<button type="button" class="btn btn-danger" (click)="modal2.hide()">Cancel</button>
			</div>
		</div>
		<!-- <div class="app-modal-footer">
			<button type="button" class="btn btn-danger" (click)="modal2.hide()">Cancel</button>
		</div> -->
	</app-modal>
	<div *ngIf="!storyLanes">
		<fa name="cog" animation="spin"></fa>
	</div>
	<div class="row" *ngIf="storyLanes" style="margin-left: -4px; margin-right: -4px">
		<div *ngFor="let lane of storyLanes; index as i; first as isFirst ; last as isLast" class="card col-sm" style="margin: 4px; padding:0px">
			<div class="card-header">
				<h5>{{lane.name}}</h5>
				<div *ngIf="!stories">
					<fa name="cog" animation="spin"></fa>
				</div>
			</div>
			<div [dragula]='"bag"' [dragulaModel]='getStoriesByLane(lane)' id="{{lane.id}}" style="min-height: 130px" *ngIf="stories"> 
				
				<div *ngFor="let story of getStoriesByLane(lane)" id="{{story.id}}" class="card interactive" style="margin: 4px; padding: 0px;">
					<div class="card-header" (click)="selectStory(story); modal2.show()" style="cursor: pointer; padding: 4px; vertical-align: middle">
						<a *ngIf="!isFirst" (click)="changeLane(story, storyLanes[i - 1])" style="float: left; cursor: pointer;">
							<fa name="caret-left" size="2x"></fa>
						</a>
						<span class="card-subtitle mb-2 text-muted" style="vertical-align: middle; margin-left:4px; margin-right:4px">Points
							<span class="badge badge-primary">{{story.points}}</span>
						</span>
						<a *ngIf="!isLast" (click)="changeLane(story, storyLanes[i + 1])" style="float: right; cursor: pointer;">
							<fa name="caret-right" size="2x"></fa>
						</a>
					</div>
					<div class="card-body" (click)="selectStory(story); modal2.show()" style="cursor: pointer; margin: 4px; padding: 4px;">
						<h5 class="card-title">{{story.name}}</h5>
						<p *ngIf="story.description" class="card-text">{{story.description.slice(0, 50)}}</p>
					</div>
				</div>
			</div>

		</div>
	</div>

</div>